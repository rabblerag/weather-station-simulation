services:
  server:
    build:
      context: ./server
      dockerfile: Dockerfile
    hostname: ${SERVER_HOSTNAME}
    container_name: ${SERVER_HOSTNAME}
    # ports:
    #   - "8080:8080"
    environment:
      - DB_PATH
      - MAX_STATIONS
      - MAX_MSG_LEN
      - MAX_TIMEOUT=5.0
      - SERVER_PORT
      - METRIC_RANGES
      - LOG_LEVEL=info
    volumes:
      - logs:/app/logs:rw
      - data-db:${DB_PATH}:rw
    secrets:
      - server-secret
      - station-secrets
    networks:
      - stations-net